<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELLA Dashboard - LEON PMS</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="css/shared.css" rel="stylesheet">
    <style>
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .action-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border-top: 4px solid #FF6842;
        }

        .action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .action-icon {
            font-size: 3rem;
            color: #FF6842;
            margin-bottom: 15px;
        }

        .action-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .action-desc {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .recent-activity {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-top: 30px;
        }

        .activity-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .activity-icon.checkin { background: #d4edda; color: #155724; }
        .activity-icon.checkout { background: #fff3cd; color: #856404; }
        .activity-icon.booking { background: #d1ecf1; color: #0c5460; }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-weight: 500;
            color: #333;
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 0.8rem;
            color: #666;
        }

        .stat-trend {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .trend-up { color: #28a745; }
        .trend-down { color: #dc3545; }
        .trend-neutral { color: #6c757d; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-hotel"></i> LEON PMS
            </a>
            
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link" data-page="dashboard">
                            <i class="nav-icon fas fa-home"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="operations.html" class="nav-link" data-page="operations">
                            <i class="nav-icon fas fa-tasks"></i>
                            Operations
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="inventory.html" class="nav-link" data-page="inventory">
                            <i class="nav-icon fas fa-calendar-alt"></i>
                            Inventory
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="bookings.html" class="nav-link" data-page="bookings">
                            <i class="nav-icon fas fa-book"></i>
                            Bookings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="rooms.html" class="nav-link" data-page="rooms">
                            <i class="nav-icon fas fa-bed"></i>
                            Room Types
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="analytics.html" class="nav-link" data-page="analytics">  
                            <i class="nav-icon fas fa-chart-bar"></i>
                            Analytics
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="chat.html" class="nav-link" data-page="chat">  
                            <i class="nav-icon fas fa-comments"></i>
                            ELLA Chat
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="user-info">
                <i class="fas fa-user-circle"></i> Property Manager
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">Dashboard Overview</h1>
                <p class="page-subtitle">Welcome to LEON Property Management System</p>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="spinner"></div>
                    Loading...
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="action-card" onclick="goToPage('operations')">
                    <div class="action-icon">
                        <i class="fas fa-sign-in-alt"></i>
                    </div>
                    <div class="action-title">Daily Operations</div>
                    <div class="action-desc">Manage check-ins, check-outs, and room assignments</div>
                </div>

                <div class="action-card" onclick="goToPage('inventory')">
                    <div class="action-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="action-title">Room Inventory</div>
                    <div class="action-desc">View calendar, room status, and availability</div>
                </div>

                <div class="action-card" onclick="goToPage('bookings')">
                    <div class="action-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div class="action-title">New Booking</div>
                    <div class="action-desc">Create and manage guest reservations</div>
                </div>

                <div class="action-card" onclick="goToPage('analytics')">
                    <div class="action-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="action-title">Reports</div>
                    <div class="action-desc">View occupancy, revenue, and performance analytics</div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <div class="card-header">
                    <h3 class="card-title">Recent Activity</h3>
                </div>
                <div id="recentActivity">
                    <div class="loading">
                        <div class="spinner"></div>
                        Loading recent activity...
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/api.js"></script>
    <script src="js/navigation.js"></script>
    <script>
        let dashboardData = null;

        async function loadDashboard() {
            try {
                dashboardData = await api.getDashboardStats();
                renderStats(dashboardData);
                renderRecentActivity();
            } catch (error) {
                console.error('Error loading dashboard:', error);
                showAlert('Failed to load dashboard data', 'error');
            }
        }

        function renderStats(data) {
            const statsGrid = document.getElementById('statsGrid');
            
            const stats = [
                {
                    label: 'Total Rooms',
                    value: data.total_rooms || 0,
                    trend: 'neutral',
                    icon: 'fa-bed'
                },
                {
                    label: 'Occupied Rooms',
                    value: data.occupied_rooms || 0,
                    trend: data.occupied_rooms > data.yesterday_occupied ? 'up' : 'down',
                    icon: 'fa-user'
                },
                {
                    label: 'Available Rooms',
                    value: data.available_rooms || 0,
                    trend: 'neutral',
                    icon: 'fa-door-open'
                },
                {
                    label: 'Occupancy Rate',
                    value: data.occupancy_rate ? `${data.occupancy_rate}%` : '0%',
                    trend: data.occupancy_rate > 75 ? 'up' : data.occupancy_rate < 50 ? 'down' : 'neutral',
                    icon: 'fa-percentage'
                },
                {
                    label: 'Today\'s Check-ins',
                    value: data.todays_checkins || 0,
                    trend: 'up',
                    icon: 'fa-sign-in-alt'
                },
                {
                    label: 'Today\'s Check-outs',
                    value: data.todays_checkouts || 0,
                    trend: 'up',
                    icon: 'fa-sign-out-alt'
                }
            ];

            statsGrid.innerHTML = stats.map(stat => `
                <div class="stat-card">
                    <span class="stat-number">
                        <i class="fas ${stat.icon}" style="font-size: 0.8em; margin-right: 10px;"></i>
                        ${stat.value}
                    </span>
                    <div class="stat-label">${stat.label}</div>
                    <div class="stat-trend trend-${stat.trend}">
                        <i class="fas fa-${stat.trend === 'up' ? 'arrow-up' : stat.trend === 'down' ? 'arrow-down' : 'minus'}"></i>
                        ${stat.trend === 'up' ? 'Trending up' : stat.trend === 'down' ? 'Trending down' : 'Stable'}
                    </div>
                </div>
            `).join('');
        }

        function renderRecentActivity() {
            const activityContainer = document.getElementById('recentActivity');
            
            // Mock recent activity data - replace with real data from API
            const activities = [
                {
                    type: 'checkin',
                    text: 'John Doe checked into Room 1001',
                    time: '2 hours ago',
                    icon: 'fa-sign-in-alt'
                },
                {
                    type: 'checkout', 
                    text: 'Sarah Chen checked out of Room 1002',
                    time: '4 hours ago',
                    icon: 'fa-sign-out-alt'
                },
                {
                    type: 'booking',
                    text: 'New booking received for Mike Johnson',
                    time: '6 hours ago',
                    icon: 'fa-calendar-plus'
                },
                {
                    type: 'checkin',
                    text: 'Emily Davis checked into Room 1005',
                    time: '8 hours ago',
                    icon: 'fa-sign-in-alt'
                }
            ];

            activityContainer.innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon ${activity.type}">
                        <i class="fas ${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-text">${activity.text}</div>
                        <div class="activity-time">${activity.time}</div>
                    </div>
                </div>
            `).join('');
        }

        // Load dashboard data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboard();
        });
    </script>
</body>
</html> 